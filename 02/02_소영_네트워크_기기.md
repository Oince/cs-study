> 이 포스팅은 주홍철 저 '면접을 위한 CS 전공지식 노트' 2.3장을 토대로 작성되었습니다.

## 📌 네트워크 기기의 처리 범위

네트워크는 여래 개의 네트워크 기기를 기반으로 구축됩니다.

네트워크 기기는 계층별로 처리 범위를 나눌 수 있습니다.

물리 계층을 처리하는 기기, 애플리케이션 계층을 처리하는 기기 등..

<img width="1117" height="609" alt="image" src="https://github.com/user-attachments/assets/1cf65c79-2d73-48a9-9dd3-227615d15836" />

이때 상위 계층을 처리하는 기기는 하위 계층까지 처리할 수 있지만,

그 반대로 불가능합니다.

예를 들어 L7 스위치는 L4, L3까지 처리가 가능하지만, L4 스위치는 L7까지 이해하지 못합니다.

오늘 알아볼 계층별 네트워크 기기는 다음과 같습니다.

| **계층** | **기기** |
| --- | --- |
| 애플리케이션 계층 | L7 스위치 |
| 전송 계층 | L4 스위치 |
| 인터넷 계층 | 라우터, L3 스위치 |
| 데이터 링크 계층 | L2 스위치, 라우터 |
| 물리 계층 | NIC, 리피터, AP |

---

## 📌 애플리케이션을 계층을 처리하는 기기

### L7 스위치

L7 스위치는 Layer 7, 즉 7번째 계층인 애플리케이션 계층에서 사용하는 스위치입니다.

> **스위치란?**  
> 같은 네트워크 내에서 MAC 주소를 기반으로 여러 장비를 연결하고 데이터 통신을 중재하며  
> 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는 통신 네트워크 장비입니다.

<img width="600" height="321" alt="image" src="https://github.com/user-attachments/assets/23c7ef2c-ab5c-46a3-9c59-165cc38ce57d" />

-   **L7 스위치 = 로드밸런서 = 서버의 부하를 분산하는 기기**
-   클라이언트로부터 오는 요청들을 뒤쪽의 여러 서버로 나누는 역할 → 시스템은 더 많은 트래픽을 처리할 수 있게 됨
-   URL, 서버, 캐시, 쿠키들을 기반으로 트래픽 분산
-   필터링 기능 + 응용 프로그램 수준의 트래픽 모니터링 기능 포함
    -   필터링: 바이러스, 불필요한 외부 데이터 등을 걸러냄.
-   정기적인 헬스 체크(health check)를 통해 장애가 발생한 서버는 트래픽 분산 대상에서 제외

**헬스 체크**

-   "서버야, 너 건강하게 잘 살아있니?" = "요청 잘 받을 수 있니?"
-   로드밸런서에서 반복적으로 서버에 요청을 보냄
-   로드밸런서는 헬스 체크를 통해 정상적인 서버와 비정상적인 서버를 판별  
    요청을 보냈고, 요청이 정상적으로 이루어졌으면 정상 서버로 판단
-   단, 서버에 부하가 되지 않을 만큼 요청 횟수를 적절하게 조정해야 함

#### 로드밸런서를 이용한 서버 이중화

서비스를 안정적으로 사용하기 위해서 2대 이상의 서버는 필수입니다.

에러가 발생하여 서버 1대가 종료되더라도 다른 서버를 이용해 서비스는 멈추지 않고 운용될 수 있습니다.

로드밸런서는 2대 이상의 서버를 기반으로 가상 IP를 제공하고,

이를 기반으로 안정적인 서비스를 제공합니다.

<img width="600" height="442" alt="image" src="https://github.com/user-attachments/assets/2f031613-e3a0-4a92-90b0-bdef22c9f988" />

예를 들어 2대의 서버가 있습니다.

이 서버들의 실제 IP 주소는 0.0.0.12011과 0.0.0.12012입니다.

사용자들은 서버의 실제 IP 주소가 아니라

로드밸런서가 제공하는 가상 IP 0.0.0.12010에 요청을 보내고,

로드밸런서는 가상 IP로 들어온 요청들을 실제 서버로 분산합니다.

만약 0.0.0.12011 서버에 장애가 발생하면 다른 서버 0.0.0.12012로 요청을 보내 안정적인 서비스를 제공합니다.

---

## 📌 전송 계층을 처리하는 기기

### L4 스위치

L4 스위치는 L7 스위치와 같이 로드밸런서 역할을 하지만 차이점이 있습니다.

-   **L4 스위치**는 L4, **전송 계층**을 처리하는 기기입니다.
-   **L7 스위치**가 L7, **애플리케이션 계층**을 처리합니다.
-   **L4 스위치**는 전송 계층에서 헤더 정보를 분석하여 데이터 패킷을 처리하고 전송 방향을 결정하여 트래픽을 분산합니다.  
    이때 IP와 포트를 기반으로 (특히 포트를 기반으로) 트래픽을 분산합니다.
-   **L7 스위치**는 IP, 포트 외에도 URL, HTTP 헤더, 쿠키 등의 페이로드(패킷의 내용)를 기반으로 트래픽을 분산합니다.

#### L4 스위치와 L7 스위치의 차이

앞에서 상위 계층을 처리하는 기기는 하위 계층까지 처리할 수 있다고 했습니다.

그렇다면 L7 스위치는 L4 스위치가 맡은 전송 계층까지 처리가 가능합니다.

그렇다면 L7 스위치만 사용해도 되지 않을까요?

→ **_NO!_**

L7 스위치는 페이로드를 분석하여 요청을 분매하여 애플리케이션 계층 수준에서 로드밸런싱이 가능한데

여기다가 필터링, 모니터링 기능 등이 포함되어

L4 스위치보다 조금 더 세밀한 수준의 고급 로드밸런싱과 트래픽 관리가 가능합니다.

그러나 이는 때에 따라 너무 많은 기능을 수행할 수도 있어서

단순히 포트 정보만으로도 충분히 부하 분산이 가능하다면 페이로드까지 분석하며 리소스를 더 쓸 필요가 없습니.

정리하자면, L7 스위치는 세밀한 분석이 가능하지만, 단순 부하 분산에는 L4 스위치가 더 효율적입니다.

따라서 HTTP 요청 등 애플리케이션 계층의 해석이 필요한 경우에는 L7 스위치를 사용하고,

상위 레벨에 대한 이해가 필요없이 TCP/UDP 로드밸런싱이 필요한 경우에는 L4 스위치를 사용합니다.

정리하자면,

**L4 스위치**는 전송 계층(TCP/UDP) 기준으로 트래픽을 분산합니다.  
TCP/UDP 연결 정보를 기반으로 포트 번호와 IP 주소만으로 부하를 분산할 수 있습니다.

-   패킷 내용(페이로드)까지 분석하지 않아 처리 속도가 빠르고, 장치 성능에 부담이 적습니다.
-   단순히 어느 서버로 요청을 보낼지만 결정하면 됩니다.
-   **대규모 트래픽에서 효율적으로 부하를 분산**할 수 있습니다.

즉, L4 스위치는 IP/포트 정보만으로 충분한 상황에서 가장 효율적인 로드밸런싱입니다.

**L7 스위치**는 애플리케이션 계층까지 패킷을 분석하므로

TCP/UDP 포트 정보만으로 충분하지 않고 애플리케이션 계층까지 이해하고 처리해야 할 때 사용합니다.

예를 들어 이런 경우가 있습니다.

-   URL 기반 라우팅 → 특정 URL 요청은 서버 A, 다른 URL 요청은 서버 B로 보냄
-   HTTP 헤더, 쿠키, 세션 기반 트래픽 분산 → 로그인 상태, 세션 정보에 따라 서버 지정

---

## 📌 인터넷 계층을 처리하는 기기

#### 라우터

-   여러 컴퓨터 네트워크를 서로 연결하고 서로 통신할 수 있도록 도와주는 장치
-   라우팅을 하는 장비
-   라우팅: 서로 다른 네트워크에 존재하는 장치끼리 IP 주소를 기반으로 데이터를 전달하는 것. 라우팅 테이블을 참조하여 최적의 경로로 패킷을 포워딩하는 것.

패킷이 도착하면 라우터는 먼저 라우팅 테이블에서 그 주소를 찾습니다.

목적지까지 가는 데 최적의 경로를 찾아 패킷을 다음 지점으로 전달합니다.

라우팅의 방식에 대해서는 자세히 포스팅할 기회가 있겠지요..

#### L3 스위치

라우터는 소프트웨어 기반과 하드웨어 기반의 라우팅으로 나눠지고

하드웨어 기반의 라우팅을 담당하는 장치를 L3 스위치라고 합니다.

L3 스위치는 L2 스위치에 라우팅 기능이 추가된 장비입니다.

| **구분** | **L2 스위치** | **L3 스위치** |
| --- | --- | --- |
| 참조 테이블 | MAC 주소 테이블 | 라우팅 테이블 |
| 참조 PDU | 이더넷 프라임 | IP 패킷 |
| 참조 주소 | MAC 주소 | IP 주소 |

---

## 📌 데이터 링크 계층을 처리하는 기기

#### L2 스위치

장치들의 MAC 주소를 MAC 주소 테이블을 통해 관리하며,

연결된 장치로부터 패킷이 왔을 때 패킷 전송을 담당합니다.

데이터 링크 계층이므로 IP 주소를 이해하지 못해 IP 주소 기반 라우팅은 불가능하며 MAC 주소 기반의 스위칭만 가능합니다.

즉 다른 네트워크로는 데이터를 못 넘긴다는 뜻이죠.

목적지가 MAC 주소 테이블에 없다면 전체 포트에 전달하고 MAC 주소 테이블의 주소는 일정 시간 이후 삭제하는 기능이 있습니다.

#### 브리지

-   두 개의 LAN을 상호 잡속할 수 있도록 하는 통신망 연결 장치
-   포트와 포트 사이의 다리 역할
-   장치에서 받아온 MAC 주소를 MAC 주소 테이블로 관리
-   통신망 범위를 확장하고 서로 다른 LAN 등으로 이루어진 "하나의 통신망"을 구축할 때 사용

---

## 📌 물리 계층을 처리하는 기기

#### NIC

-   네트워크 인터페이스 카드(Network Interface Card)
-   2대 이상의 컴퓨터 네트워크를 구성하는 데 사용
-   네트워크와 빠른 속도로 데이터를 송수신할 수 있도록 컴퓨터 내에 설치하는 확장 카드
-   LAN 카드라고도 하며, 각 LAN 카드에는 고유의 식별 번호인 MAC 주소가 있습니다.

#### 리피터

-   Repeater
-   약해진 신호 정도를 증폭하여 다른 쪽으로 전달하는 장치 → 패킷이 더 멀리 갈 수 있음
-   광케이블 보급에 따라 현재는 사용하지 않음

#### AP

-   Access Point
-   패킷을 복사하는 기기
-   AP에 유선 LAN을 연결한 후 다른 장치에서 무선 LAN 기술(와이파이 등)을 사용하여 무선 네트워크 연결 가능

---

## 🔑 요약

| **계층** | **기기** | **설명** |
| --- | --- | --- |
| 애플리케이션 계층 | L7 스위치 | 로드밸런서 역할   IP, 포트뿐만 아니라 패킷 페이로드(URL, HTTP 헤더, 쿠키, 세션) 기반 트래픽 분산   → 세밀한 트래픽 분산 가능   \+ 보안 필터링, 모니터링 가능 |
| 전송 계층 | L4 스위치 | 로드밸런서 역할   TCP/UDP 기반 연결 정보 IP, 포트 기반 트래픽 분산   → 빠른 부하 분산으로 대규모 트래픽 처리에 적합 |
| 인터넷 계층 | 라우터, L3 스위치  | IP 주소 기반 패킷 전달 및 라우팅   → 서로 다른 네트워크 간 데이터 전달 |
| 데이터 링크 계층 | L2 스위치, 브리지 | MAC 주소 기반 프레임 전달   → 같은 LAN 내부 장치 간 데이터 전달 |
| 물리 계층 | NIC, 리피터, AP | 전기 신호/무선 신호 전달 |

## 👩‍🏫 예상 면접 질문

| 계층별 네트워크 기기를 설명해주세요. | 애플리케이션 계층에는 L7 스위치,   전송 계층에는 L4 스위치,   인터넷 계층에는 L3 스위치와 라우터   데이터 링크 계층에는 L2 스위치,   물리 계층에는 NIC,리피터, AP 등이 있습니다. |
| --- | --- |
| L4 스위치와 L7 스위치의 차이점을 설명해주세요. | L4 스위치와 L7 스위치 모두 로드밸런서 역할을 하지만      L4 스위치는 전송 계층에서 사용하며   IP 주소와 포트 정보, 특히 포트 기반으로 트래픽을 분산하며   빠른 분산으로 대규모 트래픽 처리에 적합합니다.      L7 스위치는 애플리케이션 계층에서 사용하며   IP, 포트 외에도 URL, 쿠키 등 페이로드 정보 기반 세밀한 트래픽 분산이 가능합니다. |
| 로드밸런서에 대해 설명해주세요. | 로드밸런서는 안정적인 서비스 운영을 위해 여러 서버를 사용할 때 가상 IP를 제공하여 요청이 들어오면 각 서버로 트래픽을 분산하는 역할을 합니다.   장애 서버를 제외하고 정상 서버로만 트래픽을 분산하여 안정적인 무중단 서비스가 가능합니다. |
| 라우팅과 스위치 차이를 설명해주세요. | 스위칭은 같은 LAN 내부에서 MAC 주소를 기반으로 데이터를 전달하는 것이고,   라우팅은 서로 다른 네트워크 간 IP 주소를 기반으로 데이터를 최적 경로로 전달하는 것입니다. |
| MAC 주소와 IP 주소의 차이를 설명해주세요. | MAC 주소는 데이터 링크 계층(L2)에서 사용되는 하드웨어 기반 주소로, LAN 내부에서 장치를 고유하게 식별하기 위해 사용됩니다.      IP 주소는 네트워크 계층(L3)에서 사용되는 논리 주소로, 네트워크 상에서 장치의 위치를 식별하고 서로 다른 네트워크 간 통신을 가능하게 합니다. |

---

참고자료

이미지 출처: [https://thebook.io/080326/](https://thebook.io/080326/)

[\[네트워크\] L4 스위치 L7 스위치 차이, 스위치란? 로드밸런서란?](https://code-lab1.tistory.com/321)  
[라우팅이란 무엇입니까?](https://aws.amazon.com/ko/what-is/routing/)
