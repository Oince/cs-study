# IP

## 1️⃣ ARP (Address Resolution Protocol)

- **정의**: IP주소(가상주소,논리 주소) → MAC주소(실제 주소,물리 주소)로 변환해 통신 가능하게 해주는 프로토콜, 주소 결정 프로토콜
- **역할**: IP와 MAC 사이의 다리
- **동작 방식**
    1. **ARP Request** : 브로드캐스트로 “이 IP 주소 가진 장치 누구야?” 질문
    2. **ARP Reply** : 해당 장치가 유니캐스트로 자신의 MAC주소 응답
- **관련 프로토콜**
    - **RARP**: MAC주소 → IP주소 변환 (현재는 DHCP가 주로 대체)

---

## 2️⃣ 홉바이홉 통신 (Hop-by-Hop)

<img width="457" height="247" alt="Image" src="https://github.com/user-attachments/assets/5cb4f0f4-2f0a-45ba-aaf4-ab401688d803" />

- **정의**: 패킷이 최종 목적지에 도달하기 위해 여러 라우터를 **거쳐 전달되는 과정**
- **홉(Hop)**: 패킷이 한 라우터(게이트웨이)를 지날 때마다 1홉 증가, 패킷이 여러 라우터 건너가는 모습 비유적 표현
- **라우팅**
    - IP주소 찾아가는 과정
    - 라우터는 **라우팅 테이블 IP**(목적지 네트워크·게이트웨이·다음 홉 정보 포함 그곳으로 가기 위한 방법이 들어있는 리스트)을 참고해 다음 경로 결정
    - 최종 목적지까지 패킷 전달
    - cf)게이트 웨이 : 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간 통신을 가능하게 하는 관문 역할
- **확인 방법**
    - `netstat -r` : 라우팅 테이블 확인
    - `traceroute` : 패킷이 거친 홉(라우터) 확인
- **홉카운트**
    - 목적지까지 거친 게이트웨이(라우터) 수
    - 홉이 많을수록 **네트워크 부하 증가 → 전송 지연 가능**

## 3️⃣ IP 주소 체계

### 🔹 IPv4

- **32비트 논리주소** (4바이트 = 8비트 × 4개 필드)
- 현재 가장 많이 사용
- 약 43억개 주소 표현
- 점(.)표현
- 표기법: `10.0.0.1` 형태
- 구성
    - **네트워크 ID**: 네트워크 자체 식별
    - **호스트 ID**: 네트워크 내 개별 장치(컴퓨터) 식별
    - **서브넷 마스크**: 네트워크/호스트 영역 구분
- **클래스 기반 주소 체계 (과거 방식, 현재는 CIDR로 대체)**
    - 앞은 네트워크 주소 뒤는 호스트 주소로 사용
    - ABC = 1:1 통신, 가장 왼쪽 비트는 구분 비트, 마지막 주소는 브로드캐스트용 주소(네트워크에 속해있는 모든 컴퓨터에 데이터 보낼때 사용)
    - A : 네트워크 8비트 + 호스트 24비트 (왼쪽 비트 = 0), 대규모
    - B : 네트워크 16비트 + 호스트 16비트 (왼쪽 비트 = 10),중규모
    - C : 네트워크 24비트 + 호스트 8비트 (왼쪽 비트 = 110),소규모
    - D : 멀티캐스트
    - E : 예비용(연구용)
  
<img width="438" height="162" alt="Image" src="https://github.com/user-attachments/assets/e7b5e6a7-f506-438b-a3ae-e7f4190f72d3" />

- **제약**
    - 네트워크/브로드캐스트 주소(첫·마지막 주소)는 호스트로 사용 불가
    - 낭비되는 주소가 많아 비효율적

---

### 🔹 IPv6

- **128비트 주소** (16진수 4자리 × 8개 블록, `:` 구분)
- 예시: `2001:0db8:85a3:0000:0000:8a2e:0370:7334`
    - `0000` 연속 경우 생략 가능, `::`은 1회만 사용 가능
- **특징**
    - 주소 부족 문제 해결
    - 숫자 앞 0 생략 가능
    - 호스트 주소 자동 설정
    - 전달 받을 수 있는 패킷 크기 확장 가능
    - 폴로 레이블링: 특정 트래픽은 특별한 처리를 통해 높은 품질 서비스 제공
    - 같은 주소 유지하며 이동성 지원 (모바일 IP)

      <img width="440" height="291" alt="Image" src="https://github.com/user-attachments/assets/a257497f-5767-491e-b443-3ef921b88590" />

- **주소 유형**
    - **유니캐스트**: 1:1 통신
    - **멀티캐스트**: 특정 그룹(1:多) 통신
    - **애니캐스트**: 가장 가까운 노드와 통신

---

## 4️⃣ IP 관련 기술

### 🔹 DHCP (Dynamic Host Configuration Protocol)

- **역할**: 장치가 네트워크 접속 시 자동으로 **IP주소·게이트웨이·DNS** 할당,네트워크 관리 프로토콜,
- **장점**
    - 관리 자동화, 주소 재사용 가능, 주소 임대 기간 갱신 가능
    - 유동 IP 지원 → 이동 사용자 환경에 적합

---

### 🔹 NAT (Network Address Translation)

- **역할**: 사설 IP ↔ 공인 IP 변환, 패킷이 라우팅 장치를 통해 전소오디는 동안 패킷 IP주소 정보를 수정하여 다른 주소로 매핑하는 방법
- **이유**
    - IPv4 주소 부족 해결
    - 여러 장치가 하나의 공인 IP로 인터넷 접속 가능 (예: 가정용 공유기안에 NAT 있음)
- **장점**: 보안 강화(내부 IP 은닉)
- **단점**: 동시 접속 많을수록 속도 저하 가능