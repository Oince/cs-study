컴퓨터의 기본 구조에 대해 간단하게 다뤄보았다.

# 컴퓨터 시스템의 구조

컴퓨터 시스템은 기본적으로 하드웨어, 시스템 소프트웨어 그리고 응용 소프트웨어들로 구성된다.

<img width="687" height="402" alt="image" src="https://github.com/user-attachments/assets/45ee9f99-938d-4802-a0cb-36d35c8c397b" />

## 하드웨어의 주요 요소들

| 메인 보드 (마더 보드) | 주요 IC 칩들과 메모리 모듈 및 I/O 장치 인터페이스를 위한 슬롯들이 장착되는 기판,
주 기판 혹은 마더 보드라고도 함 |
| --- | --- |
| 중앙 처리 장치 (CPU) | 프로그램 실행과 데이터 처리라는 중추적 기능의 수행을 담당 |
| 기억 장치 (메모리) | 프로그램 및 데이터를 저장하는 장치,
주 기억장치인 RAM과 보조 저장장치(2차 기억장치)인 SSD 등이 존재 |
| 입출력 장치 | 사용자와 컴퓨터 사이의 데이터 흐름을 관리.
키보드, 마우스, 모니터, 프린터 등 |
| 시스템 버스 | CPU, 메모리, 입출력 장치 등 각 구성 요소 간의 통신 담당 |

# 컴퓨터의 기능

프로그램 코드를 정해진 순서대로 수행한다.

데이터를 읽어서(read), 처리하고(processing), 저장(store)한다.

# 주요 구성 요소

컴퓨터의 주요 구성 요소는 크게 중앙처리장치, 기억 장치, 입출력 장치가 있다.

<img width="1266" height="506" alt="image" src="https://github.com/user-attachments/assets/0f119299-bd71-4385-8c6e-f18cbf381ab6" />

간단히 표현하면 이와 같다

<img width="1008" height="667" alt="image" src="https://github.com/user-attachments/assets/fe98c097-dfa7-465d-9704-cc65383d75d4" />

조금 더 자세히 컴퓨터 시스템을 표현하자면 이와 같다.

## 중앙처리장치 (CPU; Central Processing Unit)

- 프로그램 실행과 데이터 처리라는 중추적 기능의 수행을 담당 (컴퓨터의 두뇌, 프로세서)
- CPU의 구성요소는 크게 산술논리 연산장치(ALU), 제어장치(CU), 레지스터로 구성되어 있다.

### 산술 논리 연산 장치 (ALU; Arithmetic Logic Unit)

명령어를 실행하기 위한 다양한 산술 및 논리 연산을 처리하는 역할 수행

- ALU의 결과는 레지스터에 저장되거나 다음 단계로 전달된다

### 제어 장치(CU; Control Unit)

메모리에서 명령을 가져와 명령어 해독과, 해독된 명령어 실행을 지시하는 역할 (=CPU를 제어하는 장치)

제어 신호를 보내고, 명령어를 해석한다.

### 레지스터 (Register)

제어, 연산 장치 등에서 사용하는 임시 기억 장치의 역할

프로그램을 실행하는 데 필요한 값들을 임시로 저장

### CPU의 세부 기능

- Interrupt line (인터럽트 라인)
    
    키보드에서 입력이 들어오거나, 디스크에서 무언가를 읽어와야 하는 등의 작업이 생기면 interrupt line이 CPU가 알 수 있도록 한다.
    
- mode bit
    
    CPU에서 실행되는 것인 운영체제인지 사용자 프로그램인지 구분한다.
    
    - mode bit = 0(커널 모드)일 때, 운영체제가 CPU에서 실행 중인 것
        - 이 때는 메모리 접근이나 입출력 장치 접근 등 어떤 작업이든 다 할 수 있도록 정의됨
    - mode bit = 1(사용자 모드)일 때, 제한된 명령(instruction)만 CPU에서 실행할 수 있도록 함

## 기억 장치 (Memory)

### 주기억장치(Main Memory) - RAM(휘발성)/ROM(비휘발성)

컴퓨터 내부에서 현재 CPU가 처리하고 있는 내용을 저장하고 있는 기억장치

액세스 속도가 높지만, 프로그램 실행 중에만 사용될 수 있는 일시적 기억장치

- 대표적으로 RAM과 ROM으로 나누어져 있다.
    - 오직 기억된 정보만 읽을 수 있는 ROM (BIOS와 같은 변화시키면 안 되는 주요 데이터가 저장)
    - 속도가 빠르고, 임의 접근과 읽기/쓰기가 가능한 휘발성 메모리 RAM
    
    ⇒ 데이터를 읽는 속도가 보조기억장치에 비해 상대적으로 빠르다.
    

### 보조저장장치/보조기억장치/2차 기억장치

속도는 느리지만, 영구 저장 능력을 가진 기억장치

- 저장 밀도가 높고, 비트 당 가격이 낮음
- 읽기/쓰기 속도가 느림
- 주기억장치보다는 느리지만, 컴퓨터의 전원을 꺼도 데이터가 사라지지 않는 비휘발성 성격을 가지고 있음
- 대표적으로 SSD와 HDD가 존재

## 메모리 관련 세부 기능

### DMA Controller (Direct Memory Access Controller)

메모리에 직접 접근하는 컨트롤러

- 특정 하드웨어 시스템이 CPU와 독립적으로 메인 메모리에 접근할 수 있게 해주는 방식
- CPU는 DMA Controller에게 명령을 내리고 다른 할 일을 할 수 있도록 함
- 디바이스들의 로컬 버퍼에서 메모리로 데이터 이동이 완료되었다는 인터럽트만 발생시킴
    - 많은 데이터를 디스크로 전달하기 위해 programmed I/O(PIO)를 사용한다면 CPU가 다른 프로세스를 처리하기 위해 사용될 수 있는 시간들이 허비됨
    - Byte 단위로 인터럽트를 주지 않고, 블럭 단위로 전송이 완료될 때마다 인터럽트 발생

### Memory Controller

DMA와 CPU가 동시에 특정 메모리에 접근하면 문제가 생길 수 있기에, 이를 중재하기 위한 컨트롤러

## 입출력 장치(I/O Devices)

컴퓨터와 외부 장치 간 데이터 전송 제어

- 입력 장치와 출력 장치의 통칭
- 사용자-컴퓨터 간의 상호작용을 위한 장치들
- CPU는 해당 장치 제어기를 통하여 동작 제어 (직접 데이터를 교환할 수는 없음)
- 주변장치라고도 부름

### Device Controller (장치 제어기)

입출력 장치 각각을 전담하는 작은 CPU (하드웨어)

장치 내부를 통제하는 것은 CPU가 아닌, Device Controller가 담당한다.

↔ Device Driver(장치 구동기)는 OS 코드 중 각 장치 별 처리 루틴을 담당하는 소프트웨어

### Local Buffer

Device Controller 각각의 작업 공간

Device Controller는 입출력 장치 각각을 전담하는 작은 CPU라고 하였으니, 그 작은 CPU들이 가지고 있는 레지스터라 비유해도 될 것 같다.

## 타이머 (Timer)

특정 프로그램이 CPU를 독점하는 것을 막기 위함

맨 처음 컴퓨터를 키면, 운영 체제가 CPU를 가지고 있다.
추후 여러 프로그램이 실행되면 그 프로그램에게 CPU를 넘겨 주는데, 이 때 그냥 CPU를 넘겨주는 것이 아닌 timer에 어떤 값을 세팅한 후, 프로그램에게 CPU를 넘겨 준다.

이후 타이머에게 할당된 시간이 지나면, 타이머가 인터럽트를 걸어 할당 시간이 끝났다고 CPU에게 알린다.
그러면 CPU는 하던 일을 잠시 멈추고, CPU의 제어권이 운영체제에게로 돌아가고, 제어권을 돌려받은 운영체제는 그 다음 프로그램에게 CPU를 또다시 넘겨준다.

# 컴퓨터 전원을 키면 어떤 일이 발생할까?

## 부팅 절차

1. 전원 공급
    - 파워(Power Supply)가 전류를 메인 보드와 입출력 장치로 공급
    - 전원 안정화 확인(Power Good 신호) 후 CPU가 리셋 벡터에서 시작
2. CPU 초기 작동
    - CPU는 정해진 메모리 주소(리셋 벡터)에 있는 펌웨어 코드(BIOS(Basic Input Output System) 혹은 UEFI(통합 확장 펌웨어 인터페이스, Unified Extensible Firmware Interface)를 실행
3. BIOS/UEFI 실행 및 POST
    - POST(Power On Self Test)를 진행하여 하드웨어의 정상적인 작동 검사
    - 이상이 없다면 부팅 가능한 장치 탐색
4. 부트스트랩 로더 실행
    - 부트로더를 메모리에 올려 실행
    - 바이오스라면 MBR(하드디스크 첫 섹터)를, UEFI라면 EFI System Partition에 있는 부트 매니저를 찾음
5. 부트로더 단계
    - 부트로더가 운영체제 커널을 메모리에 적재
    - 부트 파라미터 등의 전달
    - 필요 시 추가 드라이버나 모듈도 함께 불러옴
6. 운영체제 커널 초기화
    - 커널이 실행되어 메모리/프로세스/입출력 관리 등을 준비
    - 시스템 서비스 및 초기 프로세스 실행
    - 커널 초기화 이후 첫 번째 사용자 프로세스(init/systemd) 실행 후 서비스와 데몬 기동
7. 사용자 환경 준비 및 동작
    - 이후 사용자 명령 대기 → 입출력/인터럽트 발생 시 CPU가 처리하며 동작

# 운영체제

시스템의 자원과 동작을 관리하는 소프트웨어

컴퓨터 하드웨어를 효율적으로 관리하여 성능을 높이고 사용자에게 편의를 제공하는 프로그램

컴퓨터 사용자와 컴퓨터 하드웨어 사이의 중개자 역할을 수행

## 운영체제의 목적

- 사용자 관점: 사용자가 원하는 것을 더 쉽게 할 수 있도록 (사용자의 편의성)
- 시스템 관점: 하드웨어를 낭비하지 않고 성능 향상 (효율성)

⇒ 두 관점의 조합으로 설계된다 (편리 + 효율)

## 운영체제의 역할

- 자원 관리 (효율성)
    - 컴퓨터 시스템 자원의 효율적인 관리
    - 시스템 자원 관리
        - 하드웨어 자원: CPU, Memory, I/O Device 등
        - 소프트웨어 자원: 프로세스, 파일 메시지 등
- 자원 보호 (안정성)
    - 컴퓨터 시스템의 자원들을 보호 (데이터 삭제 및 중요 파일 접근 등)
- 인터페이스 제공
    - 하드웨어 인터페이스 제공 (확장성)
    - 사용자 인터페이스 제공 (편리성)

## 운영체제의 구조

<img width="1806" height="1077" alt="image" src="https://github.com/user-attachments/assets/251c97b4-d373-448d-b4e7-29ce353b8ddf" />

간단하게 정리해보았다.

운영체제는 크게 인터페이스와 커널로 나눌 수 있다.

### 인터페이스 (Interface)

> 커널과 사용자 간의 다리
> 

인터페이스라는 단어는 상호 간 소통을 위한 매개체를 의미한다.
그렇다면 컴퓨터 용어로 사용하는 인터페이스 또한 그 의미가 유사할 것이다.

운영체제에서 사용되는 인터페이스는 사용자와 컴퓨터 간 소통의 역할을 한다.
사용자의 명령을 컴퓨터에게 전달하고, 그 결과를 사용자에게 알려주는 상호 간 소통을 할 수 있도록 매개체의 역할을 수행한다.

대표적으로 GUI, CLI가 있는데, 터치 스크린 인터페이스의 경우 스마트폰 등의 터치 스크린 화면을 의미한다.

### 커널(Kernel)

일반적으로 CS 관련해서 사용하는 단어는 어떤 친구인지 알 수 있도록 직관적인 단어를 사용하는 경우가 많다. 커널도 이와 같다.

영어 사전을 보면 kernel은 “알맹이”, “핵심” 이라는 뜻을 가지고 있다.

단어의 의미와 같이 커널은 운영체제의 핵심으로 컴퓨터 자원을 관리하는 역할을 수행한다.
그 중 가장 큰 역할은 컴퓨터의 물리적 자원(하드웨어)와 추상화 자원을 관리하는 것이다.

### 시스템 호출 인터페이스 (System Call Interface)

> 커널에 접근할 수 있는 유일한 공식적인 방법
> 

커널은 컴퓨터 자원을 관리한다고 했다. 그렇다면 커널은 실제 자원에 접근할 수 있다는 것을 의미하기도 한다.

씨앗을 생각해보자, 싹을 틔우기 위해서 필요한 어린잎, 영양분 등의 여린 부분을 보호하기 위해 씨앗은 딱딱한 겉껍질을 통해 그 내부 중요한 요소들을 보호한다.

커널에서는 “시스템 콜”이 겉껍질 역할과 같은 보호 역할을 수행한다.

시스템 콜은 사용자나 응용 프로그램이 직접적으로 컴퓨터 자원에 접근하는 것을 막고, 자원을 보호하기 위해 구성한 인터페이스이다. 시스템 콜 함수를 통해서만 커널에 접근하여 자원을 요청할 수 있다.

### 드라이버 (디바이스 드라이버)

커널과 하드웨어 간 통신을 가능하게 하는 인터페이스이다.

정말 다양한 하드웨어가 존재하고 그 모든 것을 커널 안에 다 넣기도 그렇고, 다 개발하기도 그렇다.
따라서, 커널은 입출력 정도의 기본적인 부분만 제작하고, 하드웨어의 특성을 반영한 소프트웨어를 하드웨어 제작자에게 받아 커널이 실행될 때 함께 실행되도록 한다.

💡 마우스, 키보드와 같은 간단한 드라이버(입출력 정도)는 커널에 포함되어 있는 경우도 있다. 이런 경우, 하드웨어는 직접 커널과 연결되기도 한다.

### 🧩 추상화

그런데, 사실 조사하면서 봤던 단어들 중 “추상화”라는 것에 대해서 조금 궁금했었다.
하드웨어를 추상화 한다니, 추상화 자원을 관리한다니, 대체 뭘까?

일반적으로 자바 등에서는 객체 지향적 코드를 위해 추상화를 한다. 주로 여러 코드들에서 공통적인 속성과 기능을 정의하여 하위 클래스를 생성하는 경우, 추상화를 수행했다고 한다.
경차, 승용차 등의 클래스가 있다면 공통된 속성인 “탈 것” 또는 ”운송 수단” 등의 공통점을 찾아내어 “탈 것”의 하위에는 “경차”, “승용차” 등이 존재한다. 정도를 예시로 들 수 있다.

추상화란, 정의하고자 하는 대상의 디테일, 자세한, 사소한 특징들을 숨기고 주요한 특징으로 대상을 정의하는 것이다.

그렇다면, 운영체제에서 제공하는 추상화는 무엇이 있을까?

프로세스(CPU에 대한 추상화), 주소 공간(Memory에 대한 추상화), Port(Network에 대한 추상화), File(Disk에 대한 추상화) 등이 존재한다.

주소 공간을 예시로 들자면, 개발자가 물리 메모리의 실제 주소를 직접 지정하지 않는다.
대신 프로그램이 실행되어 프로세스가 될 때 운영체제가 가상 주소 공간이라는 추상화를 제공하고, 그 안에서 사용 가능한 주소를 배정해 준다. 이 가상 주소는 하드웨어에 의해 실제 물리 메모리와 매핑되어, 결론적으로 물리 메모리에 데이터가 저장되도록 하는 것이다.

메모리에서 중요한 것은 데이터가 정상적으로 저장될 수 있는 **공간의 존재**이지, 물리적인 주소를 일일히 찾는 것이 아니다. 따라서 가상 주소 공간을 통해 개발자는 단순히 저장될 공간을 지정하기만 하면 되고, 실제 물리 주소를 찾아 물리 메모리에 매핑하는 과정은 운영체제가 담당한다.
이로써 사용자는 메모리의 주요 특징인 “저장 공간의 존재”만을 신경 쓰면 되고, 세부적인 물리 배치는 사용자에게 보이지 않도록 추상화되어 관리되는 것이다.

# 프로그램 입출력 요청이 들어왔다면?

1. 프로그램이 시스템 콜로 입출력 요청
    - 사용자 프로그램은 I/O 관련 시스템 콜을 통해 커널에 입출력 요청을 보냄
    - 이 때 사용자 모드에서 커널 모드(mode bit=0)로 전환
2. 커널이 장치 드라이버에 요청 전달
    - 해당 요청이 어떤 입출력 장치에 대한 것인지 파악하여, 장치 드라이버로 전달
3. 장치 드라이버가 컨트롤러에 명령
    - 장치 드라이버는 장치 컨트롤러가 사용 가능한 상태인지 검사 후, 명령을 내리고 데이터를 컨트롤러에 전달
    - 필요 시 busy bit 확인 (장치 사용 가능 여부 검사)
4. 장치 컨트롤러가 입출력 작업 수행
    - 장치 컨트롤러가 실제 입출력 장치를 제어하여 작업 수행 후, 로컬 버퍼에 데이터를 저장하고, 읽어옴
    - 작업 완료 시 인터럽트 신호를 CPU에게 보냄
5. CPU가 인터럽트 신호를 감지하여 인터럽트 서비스 루틴 실행
    - CPU는 Interrupt line을 통해 인터럽트를 감지하고, 커널의 인터럽트 서비스 루틴(ISR)을 실행
6. 커널이 프로세스 상태를 변화 시킴 (프로세스 상태 전이)
    - 입출력이 완료되면, blocked 상태였던 프로세스를 ready 상태로 변경하고, 필요한 데이터를 사용자 프로그램에게 전달
7. 프로세스 실행 재개
    - 프로세스는 I/O 결과를 받아 계속 실행 (스케줄러가 CPU를 프로세스에 다시 할당)
    - 커널은 스케줄러를 통해 우선순위에 따라 실행될 프로세스를 결정
    - 커널 모드에서 사용자 모드(mode bit=1)로 전환

# 인터럽트란?

위의 운영체제 동작 순서에서 인터럽트라는 단어가 많이 나온다.

그렇다면 인터럽트란 무엇일까?

인터럽트는 프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우, 현재 실행중인 작업을 일시 중단하고 발생된 상황을 우선 처리한 후 실행중이던 작업으로 복귀하여 계속 처리하는 것이다.

간단히 말하자면, CPU가 인터럽트라는 신호를 받으면 원래 하던 일을 멈추고 다른 무언가를 처리하는 것이다.

## 인터럽트의 종류

인터럽트는 크게 외부 인터럽트(하드웨어 인터럽트), 내부 인터럽트(소프트웨어 인터럽트)로 나뉜다.

### 하드웨어 인터럽트

외부 인터럽트에는 타이머 인터럽트, I/O 인터럽트, 전원 이상 인터럽트가 존재한다.

- 타이머 인터럽트: 타이머에 할당된 시간이 지났을 때 프로세스에게 할당한 CPU를 다시 회수하라는 인터럽트
- I/O 인터럽트: 입출력 장치에 의해서 일어나는 인터럽트
- 전원 이상 인터럽트: 갑자기 전원 공급이 중단되거나 하면, CPU에게 현재 작업 중이던 프로세스를 대피시킬 수 있도록 하는 신호를 전달

### 소프트웨어 인터럽트

내부 인터럽트에는 예외 인터럽트와 SVC 인터럽트가 존재한다.

- 예외 인터럽트 (Trap, Exception Interrupt): 비정상적인 작업, 오버플로우/언더플로우 등 CPU가 명령어를 수행하다 처리할 수 없는 예외 상황을 만났을 때 발생시키는 인터럽트
- SVC 인터럽트(SuperVisor Call)/시스템 콜: 운영체제에 서비스를 요청하기 위해 인터럽트를 걸고 커널 모드로 전환하는 인터럽트

## 인터럽트 서비스 루틴 (ISR)

특정 인터럽트가 발생했을 때 실행되는 프로그램 코드

# 참고자료

https://product.kyobobook.co.kr/detail/S000001732281

https://justzino.tistory.com/2

https://choihjhj.tistory.com/entry/%EC%BB%B4%ED%93%A8%ED%84%B0%EA%B5%AC%EC%A1%B0-%EC%BB%B4%ED%93%A8%ED%84%B0-%EB%B3%B8%EC%B2%B4%EB%A1%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94-%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B5%AC%EC%A1%B0%EC%99%80-%EB%B6%80%ED%8C%85-%EA%B3%BC%EC%A0%95

https://wooooozin.tistory.com/entry/%EC%BB%B4%ED%93%A8%ED%84%B0-%EC%8B%9C%EC%8A%A4%ED%85%9C%EA%B3%BC-%EC%BB%B4%ED%93%A8%ED%84%B0-%EC%A3%BC%EC%9A%94-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C

https://sugoring-it.tistory.com/33

https://btcd.tistory.com/80

https://beenii.tistory.com/100

https://prod.velog.io/@seung_min/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%BB%A4%EB%84%90%EA%B3%BC-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4

https://velog.io/@chappi/OS%EB%8A%94-%ED%95%A0%EA%BB%80%EB%8D%B0-%ED%95%B5%EC%8B%AC%EB%A7%8C-%ED%95%A9%EB%8B%88%EB%8B%A4.-1%ED%8E%B8-%EA%B0%9C%EC%9A%94

https://coduking.tistory.com/entry/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9COS%EB%9E%80-%EA%B0%9C%EB%85%90%EA%B3%BC-%EA%B5%AC%EC%A1%B0%EC%BB%A4%EB%84%90-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%BD%9C-%EB%93%B1

https://oobwrite.com/entry/CPU-%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8Interrupt-%EC%99%80-%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8-%ED%95%B8%EB%93%A4%EB%A7%81#toc1

[h](https://minkwon4.tistory.com/294)https://juna-dev.tistory.com/36

https://juna-dev.tistory.com/36
