> 이 포스팅은 주홍철 저 '면접을 위한 CS 전공지식 노트' 3.4장을 토대로 작성되었습니다.

---

## CPU 스케줄링 알고리즘

CPU 스케줄러는 CPU 스케줄링 알고리즘에 따라

프로세스에서 해야 하는 일을 스레드 단위로 CPU에 할당합니다.

이 알고리즘이 어떤 프로그램에 CPU 소유권을 줄 것인지 결정합니다.

| 비선점형 | FCFS   SJF |
| --- | --- |
| 선점형 | 라운드 로빈   SRF   다단계 큐 |

---

## 비선점형 방식(Non-preemptive)

-   한 번 CPU를 할당받은 프로세스는 **자발적으로 종료하거나 I/O 요청을 하기 전까지** CPU를 뺏기지 않는 방식입니다.
-   강제로 프로세스를 중지하지 않아 컨텍스트 스위칭으로 인한 부하가 적습니다.

### FCFS(First Come First Served)

-   "가장 먼저 온 것을 가장 먼저 처리한다"
-   도착한 순서대로 실행하는 방법입니다.
-   장점
    -   구현이 간단합니다.
-   단점
    -   시간이 오래 걸리는 작업이 준비 큐에서 앞에 있으면 나머지 프로세스들의 평균 대기 시간이 늘어나는 호위 효과(Convoy Effect)가 일어날 수 있습니다.
    -   아래 그림에서 0초에 P1, P2, P3가 큐에 순서대로 들어왔을 때 P2와 P3은 5초밖에 안 걸리는 짧은 작업이지만 먼저 들어온 P1이 끝나기를 기다리느라 오래 대기해야 합니다. (평균 대기 시간 = (0+30+35)/3=21.6)

<img width="943" height="605" alt="image" src="https://github.com/user-attachments/assets/3ec95030-9f1a-4f1c-a7fe-0fcca7d46c9c" />

---

### SJF(Shortest Job First)

-   실행 시간이 가장 짧은 프로세스를 가장 먼저 실행하는 알고리즘
-   장점: 평균 대기 시간이 가장 짧습니다.
    -   P1, P2, P3 같은 예시일 때 평균 대기 시간은 (0+5+10)/3=5
-   단점: 실행 시간이 긴 프로세스가 뒤로 밀리느라 실행되지 못하는 기아 현상이 일어날 수 있습니다.
-   실제로는 실행 시간을 미리 알 수 없기 때문에 과거에 같은 작업을 실행했던 기록을 바탕으로 추측합니다. (CPU burst time 예측)

---

## 선점형 방식(Preemptive)

-   지금 사용하고 있는 프로세스를 중단하고, 강제로 다른 프로세스에 CPU 소유권을 할당하는 방식
-   현대 운영체제가 사용하는 방식

### 라운드 로빈(Round Robin, RR)

-   각 프로세스는 동일한 시간 할당량만큼 CPU를 사용하고, 그 시간 안에 끝나지 않으면 다음 프로세스에 CPU 소유권을 넘기고 준비 큐의 뒤로 들어가서 대기하는 방식
-   q만큼의 할당 시간이 부여되고, N개의 프로세스가 운영되면 (N-1)\*q 시간 이후 다시 차례가 돌아옵니다.
-   장점: 공평하고 응답 속도가 빠릅니다.
-   단점: 할당 시간이 너무 크면 시간 제한을 둔 의미가 없어 FCFS가 되고, 너무 짧으면 컨텍스트 스위칭이 잦아 오버헤드가 발생합니다. 

---

### SRTF(Shortest Remaining Time First)

-   SJF(Shortest Job First)는 중간에 실행 시간이 더 짧은 작업이 들어와도 기존 작업을 모두 수행하고 그 다음 짧은 작업을 이어가는 비선점형 방식이었습니다.
-   SRF는 중간에 더 짧은 작업이 들어오면 수행하던 프로세스를 중지하고 해당 프로세스를 수행하는 알고리즘입니다.
-   장점: 평균 대기 시간이 짧아집니다.
-   단점: 긴 시간이 필요한 프로세스는 기아 상태에 빠질 수 있습니다.
-   PSJF(Preemptive Shortest Job First), STCF(Shortest Time-to-Completion First), 또는 SRF라고 불리기도 합니다.

---

### 다단계 큐(Multilevel Queue)

-   우선순위에 따른 준비 큐를 여러 개 사용하고, 큐마다 다른 스케줄링 알고리즘을 사용하는 방식입니다.
-   장점: 프로세스 특성에 맞는 스케줄링을 적용할 수 있습니다.
-   단점: 기본적으로 프로세스는 다른 큐로 이동할 수 없어 유연성이 부족합니다.
    -   이를 보완하기 위해 프로세스가 상황에 따라 큐를 이동할 수 있는 다단계 피드백 큐를 사용할 수 있습니다.

---

### 우선순위(Priority Scheduling)

-   각각의 프로세스에 우선순위 넘버를 부여하여 우선순위별로 CPU를 할당하는 알고리즘
-   우선순위를 정하는 방법은 비선점형 또는 선점형 알고리즘 모두 적용 가능합니다.  
    -   선점형을 적용한 경우 더 높은 우선순위 프로세스가 들어오면 CPU를 빼앗아 진행
-   낮은 우선순위의 프로세스가 절대 실행되지 않는 기아 문제가 발생할 수 있습니다.
-   이를 해결하기 위해 큐에 들어온지 오래된 작업의 우선순위를 높이는 노화(aging)을 적용하여  
    대기 시간이 지날수록 프로세스의 우선순위를 높여 결국 실행되도록 보장할 수 있습니다.

---

참고자료

[\[운영체제\] CPU 스케줄링 알고리즘 정리 및 요약, FCFS, SJF, Round Robin](https://code-lab1.tistory.com/45)
